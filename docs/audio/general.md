# 音声

## 音声認識
音声も光と同じように周波数(波長)ごとの成分(スペクトル)に分解できる。  
スペクトルは個人間の違いや特徴によって異なるので、音声認識に用いられることが多い。

## スペクトルの抽出の流れ

1. 音声
2. フレーム化
3. 窓掛け
4. スペクトル
5. 振幅スペクトル
    5. 対数振幅スペクトル
6. パワースペクトル
    6. 対数パワースペクトル


## フレーム化
一定時間の長さの波形を切り出す処理。

フレームは次のフレーム同士重ねて切り出していく。  
切り出すフレームの長さをフレーム長と呼ぶ。

$$
フレーム長(\text{point}) = サンプリング周波数(\text{Hz}) \times フレーム長(\text{s})
$$

前のフレームと重なっていない部分の長さをフレームシフト長と呼ぶ。

$$
フレームシフト長(\text{point}) = サンプリング周波数(\text{Hz}) \times フレームシフト長(\text{s})
$$

音声全体のフレーム数は以下のように計算できる。

$$
フレーム数 = \frac{音声の長さ(\text{point}) - フレーム長(\text{point})}{フレームシフト長(\text{point})}
$$

??? 例
    サンプリング周波数$16000(\text{Hz})$(1秒間に16000point), フレーム長$25\text{ms}$, フレームシフト長$10\text{ms}$
    
    $$
    \begin{align}
    フレーム長(\text{point}) 
    &= 16000(\text{Hz}) \times 0.025(\text{s}) \\
    &= 400(\text{point}) 
    \end{align}
    $$

    $$
    \begin{align}
    フレームシフト長(\text{point}) 
    &= 16000(\text{Hz}) \times 0.010(\text{s}) \\
    &= 160(\text{point}) 
    \end{align}
    $$

    $$
    \begin{align}
    フレーム数 
    &= \frac{46080 - 400}{160} + 1\\
    &= 285.5 + 1 \\
    &\fallingdotseq 286
    \end{align}
    $$

## 窓掛け
フレーム化後、ただ重ねるだけでは信号がうまく繋がらない。

切り出された信号に窓掛けするための関数(窓関数)をかけることで不連続な箇所を滑らかにする。

信号波形を$x(n)$、窓関数を$\omega(n)$とすると、窓掛け後の関数$f(n)$は次のように表される。

$$
f(n) = \omega(n) \times x(n)
$$

### 窓関数の種類
- 矩形窓

$$
\omega(n) = \left\{
\begin{array}{ll}
1 & (0 \leq n < N) \\
0 & (otherwise) 
\end{array}
\right.
$$

- ハニング窓

$$
\omega(n) = 0.5 - 0.5 \cos(\frac{2\pi n}{N}) \\
(0 \leq n < N)
$$

両端は0になるので滑らかにつながる。  
ただし、両端の振る舞いが無視される?

- ハミング窓

$$
\omega(n) = 0.54 - 0.46 \cos(\frac{2\pi n}{N}) \\
(0 \leq n < N)
$$

ハニング窓と形は同じだが改良されている。  
ハミング窓と違い、両端が0にならない。そのため多少不連続性が残る。

## 4.スペクトル
音声などの周期性のある信号は単純な波(単一の周波数と振幅のsin波,cos波)の和に分解できる。(フーリエの定理)

これに従い、信号の周波数成分と振幅成分を取り出したものが、周波数スペクトルと呼ばれる。

このとき用いるのがフーリエ変換。  
音声波形から周波数(音の高さ)ごとのパワー(周波数成分をどのくらい含むか)を表す。

### フーリエ変換
音声波形のスペクトルを求める際には、サンプリング周波数に従ってサンプルされた離散的な信号なため、離散フーリエ変換(DFT)を用いる。DFTの計算を高速化したFFTを用いることが多い。

音声波形を$x_n$, DFTにより得られるスペクトルを$X_k$とすると、以下の式で示される。($j$は虚数単位)

$$
X_k = \sum^{N-1}_{n=0} x_n e^{-j \frac{2\pi kn}{N}} \\
(0 \leq k \leq N-1)
$$


## 5.振幅スペクトル
フーリエ変換後の結果の絶対値をとったもの。

### 5.1 対数振幅スペクトル
振幅スペクトルの対数をとったもの。

## 6. パワースペクトル
フーリエ変換後の結果の絶対値の二乗をとったもの。

### 6.2 対数パワースペクトル
パワースペクトルの対数をとったもの。


